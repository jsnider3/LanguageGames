<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VectorDodger Test</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background-color: #121212;
            color: white;
            font-family: Arial, sans-serif;
        }
        .test-section {
            margin-bottom: 20px;
            padding: 10px;
            border: 1px solid #444;
        }
        .success { color: #4CAF50; }
        .error { color: #f44336; }
    </style>
</head>
<body>
    <h1>VectorDodger Code Test</h1>
    <div id="test-results"></div>
    
    <script>
        const results = document.getElementById('test-results');
        
        function addResult(test, success, message) {
            const div = document.createElement('div');
            div.className = 'test-section ' + (success ? 'success' : 'error');
            div.textContent = `${test}: ${success ? 'PASS' : 'FAIL'} - ${message}`;
            results.appendChild(div);
        }
        
        // Test 1: Check if game.js loads without syntax errors
        const script = document.createElement('script');
        script.src = 'game.js';
        script.onload = () => {
            addResult('Script Loading', true, 'game.js loaded successfully');
            
            // Test 2: Check if classes exist
            try {
                const classTests = [
                    'Player', 'PlayerProjectile', 'Enemy', 'BasicEnemy', 
                    'SpiralShooter', 'Charger', 'Projectile', 'PowerUp',
                    'Particle', 'UI', 'Game', 'InputHandler'
                ];
                
                let allClassesExist = true;
                classTests.forEach(className => {
                    if (typeof window[className] !== 'function') {
                        addResult(`Class ${className}`, false, 'Class not found');
                        allClassesExist = false;
                    }
                });
                
                if (allClassesExist) {
                    addResult('All Classes', true, 'All game classes are defined');
                }
                
                // Test 3: Check if game instance exists
                if (typeof game !== 'undefined') {
                    addResult('Game Instance', true, 'Global game instance created');
                    
                    // Test 4: Check game properties
                    const props = ['player', 'enemies', 'projectiles', 'playerProjectiles', 'weaponUnlockTimes'];
                    let allPropsExist = true;
                    props.forEach(prop => {
                        if (!(prop in game)) {
                            addResult(`Game.${prop}`, false, 'Property missing');
                            allPropsExist = false;
                        }
                    });
                    
                    if (allPropsExist) {
                        addResult('Game Properties', true, 'All required properties exist');
                    }
                    
                    // Test 5: Check player methods
                    if (game.player) {
                        const methods = ['update', 'draw', 'fireWeapon', 'unlockWeapon'];
                        let allMethodsExist = true;
                        methods.forEach(method => {
                            if (typeof game.player[method] !== 'function') {
                                addResult(`Player.${method}`, false, 'Method missing');
                                allMethodsExist = false;
                            }
                        });
                        
                        if (allMethodsExist) {
                            addResult('Player Methods', true, 'All player methods exist');
                        }
                    }
                    
                } else {
                    addResult('Game Instance', false, 'Game instance not created');
                }
                
            } catch (e) {
                addResult('Runtime Test', false, `Error: ${e.message}`);
            }
        };
        
        script.onerror = () => {
            addResult('Script Loading', false, 'Failed to load game.js - syntax error?');
        };
        
        document.head.appendChild(script);
    </script>
</body>
</html>