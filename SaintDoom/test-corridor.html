<!DOCTYPE html>
<html>
<head>
    <title>Corridor Position Test</title>
    <style>
        body { margin: 0; overflow: hidden; }
        #info {
            position: absolute;
            top: 10px;
            left: 10px;
            color: white;
            background: rgba(0,0,0,0.7);
            padding: 10px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <div id="info">
        Use WASD to move camera<br>
        Chapel door: x=5, z=-20<br>
        Corridor should extend right from door
    </div>
    <script type="module">
        import * as THREE from 'three';
        
        // Setup
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x222222);
        
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(10, 10, -10);
        camera.lookAt(5, 0, -20);
        
        const renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);
        
        // Lighting
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
        scene.add(ambientLight);
        
        const directionalLight = new THREE.DirectionalLight(0xffffff, 0.5);
        directionalLight.position.set(10, 10, 10);
        scene.add(directionalLight);
        
        // Grid helper
        const gridHelper = new THREE.GridHelper(100, 20);
        scene.add(gridHelper);
        
        // Axes helper (red=X, green=Y, blue=Z)
        const axesHelper = new THREE.AxesHelper(20);
        scene.add(axesHelper);
        
        // Chapel wall (simplified)
        const wallGeometry = new THREE.BoxGeometry(0.5, 4, 40);
        const wallMaterial = new THREE.MeshBasicMaterial({ color: 0x666666 });
        const chapelWall = new THREE.Mesh(wallGeometry, wallMaterial);
        chapelWall.position.set(5, 2, -10);
        scene.add(chapelWall);
        
        // Chapel door position marker
        const doorGeometry = new THREE.BoxGeometry(2, 3, 0.3);
        const doorMaterial = new THREE.MeshBasicMaterial({ color: 0x8B4513 });
        const door = new THREE.Mesh(doorGeometry, doorMaterial);
        door.position.set(5, 1.5, -20);
        door.rotation.y = Math.PI / 2;
        scene.add(door);
        
        // Create corridor group
        const corridorGroup = new THREE.Group();
        
        // Corridor floor (4 wide, 30 long)
        const floorGeometry = new THREE.PlaneGeometry(4, 30);
        const floorMaterial = new THREE.MeshBasicMaterial({ color: 0x00ff00, side: THREE.DoubleSide });
        const floor = new THREE.Mesh(floorGeometry, floorMaterial);
        floor.rotation.x = -Math.PI / 2;
        floor.position.z = 15; // Center at z=15 (extends from 0 to 30)
        corridorGroup.add(floor);
        
        // Corridor walls
        const wallHeight = 3.5;
        const corridorWallGeometry = new THREE.PlaneGeometry(30, wallHeight);
        const corridorWallMaterial = new THREE.MeshBasicMaterial({ color: 0x0000ff, side: THREE.DoubleSide });
        
        const leftWall = new THREE.Mesh(corridorWallGeometry, corridorWallMaterial);
        leftWall.position.set(-2, wallHeight/2, 15);
        leftWall.rotation.y = Math.PI / 2;
        corridorGroup.add(leftWall);
        
        const rightWall = new THREE.Mesh(corridorWallGeometry, corridorWallMaterial);
        rightWall.position.set(2, wallHeight/2, 15);
        rightWall.rotation.y = -Math.PI / 2;
        corridorGroup.add(rightWall);
        
        // Apply transformation
        corridorGroup.rotation.y = -Math.PI / 2;  // Rotate -90 degrees
        corridorGroup.position.set(5, 0, -20);     // Position at door
        
        scene.add(corridorGroup);
        
        // Camera controls
        const keys = {};
        document.addEventListener('keydown', (e) => keys[e.key.toLowerCase()] = true);
        document.addEventListener('keyup', (e) => keys[e.key.toLowerCase()] = false);
        
        function animate() {
            requestAnimationFrame(animate);
            
            // Camera movement
            const speed = 0.3;
            if (keys['w']) camera.position.z -= speed;
            if (keys['s']) camera.position.z += speed;
            if (keys['a']) camera.position.x -= speed;
            if (keys['d']) camera.position.x += speed;
            if (keys['q']) camera.position.y += speed;
            if (keys['e']) camera.position.y -= speed;
            
            camera.lookAt(5, 0, -20);
            
            renderer.render(scene, camera);
        }
        
        animate();
    </script>
</body>
</html>
